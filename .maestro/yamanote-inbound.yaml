appId: me.tinykitten.trainlcd.dev
tags:
  - e2e
  - yamanote
  - regression
---
# 山手線 内回り メイン画面リグレッションテスト
#
# ディープリンクで新宿駅・内回りの状態を注入し、
# Main画面が正常に表示され、シミュレーションで駅が進行することを確認する。
#
# パラメータ:
#   lid=11302    山手線のlineId
#   sgid=1130208 新宿駅のstationGroupId
#   dir=0        INBOUND（内回り）
#
# 内回り: 新宿 → 代々木 → 原宿 → 渋谷 → ...

# アプリの状態をクリアし、位置情報権限を付与
- launchApp:
    clearState: true
    permissions:
      all: allow

# アプリを停止し、ディープリンクでコールドスタート
- stopApp
- openLink: "CanaryTrainLCD://?lid=11302&sgid=1130208&dir=0"

# Main画面に新宿駅が表示されることを確認
- extendedWaitUntil:
    visible:
      text: ".*新宿.*"
    timeout: 30000
    label: "Main画面に新宿駅が表示される"

# シミュレーションが進行し次の駅に変わることを確認
# 内回り: 新宿の次は代々木
- extendedWaitUntil:
    visible:
      text: ".*代々木.*"
    timeout: 120000
    label: "シミュレーション進行: 代々木駅が表示される"

- assertTrue:
    condition: true
    label: "内回り: 新宿から代々木への駅進行を確認"
