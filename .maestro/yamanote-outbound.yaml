appId: me.tinykitten.trainlcd.dev
tags:
  - e2e
  - yamanote
  - regression
---
# 山手線 外回り メイン画面リグレッションテスト
#
# ディープリンクで新宿駅・外回りの状態を注入し、
# Main画面が正常に表示され、シミュレーションで駅が進行することを確認する。
#
# パラメータ:
#   lid=11302    山手線のlineId
#   sgid=1130208 新宿駅のstationGroupId
#   dir=1        OUTBOUND（外回り）
#
# 外回り: 新宿 → 新大久保 → 高田馬場 → 目白 → ...

# アプリの状態をクリアし、位置情報権限を付与
- launchApp:
    clearState: true
    permissions:
      all: allow

# アプリを停止し、ディープリンクでコールドスタート
- stopApp
- openLink: "CanaryTrainLCD://?lid=11302&sgid=1130208&dir=1"

# Main画面に新宿駅が表示されることを確認
- extendedWaitUntil:
    visible:
      text: ".*新宿.*"
    timeout: 30000
    label: "Main画面に新宿駅が表示される"

# シミュレーションが進行し次の駅に変わることを確認
# 外回り: 新宿の次は新大久保
- extendedWaitUntil:
    visible:
      text: ".*新大久保.*"
    timeout: 120000
    label: "シミュレーション進行: 新大久保駅が表示される"

- assertTrue:
    condition: true
    label: "外回り: 新宿から新大久保への駅進行を確認"
